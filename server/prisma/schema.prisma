// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// 1. 참여자 관리 테이블 (기본 정보)
model Participant {
  id           String      @id @default(uuid())
  name         String  // 이름
  season       String  // 횟수
  phone        String @unique  // 연락처

  // 관계 설정
  profile Profile? // 1:1 관계 (프로필은 없을 수 있음)
  meetings Meeting[] // 1:N 관계 (한 명이 여러 모임을 개설한다고 가정)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// 2. 프로필 관리 테이블 (상세 정보 & 이미지)
model Profile {
  id           String      @id @default(uuid())
  imageUrl     String?     // 프로필 이미지 경로 (Base64 & URL)
  
  // Participant와 연결 (Foreign Key)
  participantId String     @unique
  participant   Participant @relation(fields: [participantId], references: [id], onDelete: Cascade)
}

// 3. 모임 관리 테이블
model Meeting {
  id           String      @id @default(uuid())
  title        String      // 모임 제목
  desc         String      // 모임 설명
  date         DateTime    // 모임 일시
  location     String      // 모임 장소

  // 개설자 (Participant와 연결)
  hostId       String
  host         Participant @relation(fields: [hostId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
